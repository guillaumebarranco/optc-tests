<h1>
  <input [(ngModel)]="tierListTitle" />
</h1>

<details>
  <summary>Actions</summary>

  <button (click)="downloadImage()">Exporter ma Tier List</button>
  <button (click)="saveTierList()">Sauvegarder ma Tier List</button>
  <button [ngClass]="{ active: loadingTierList }" (click)="loadTierList()">
    Charger une Tier List
  </button>
  <button
    [ngClass]="{ active: removingTierList }"
    style="background-color: red"
    (click)="removeTierList()"
  >
    Supprimer une Tier List
  </button>

  <div *ngIf="loadingTierList">
    <h2>Tier List sauvegardées</h2>
    <p>Veuillez sélectionner une Tier List à charger</p>
    <button
      *ngFor="let tierList of loadedTierLists"
      (click)="selectTierListToLoad(tierList)"
    >
      {{ tierList.name }}
    </button>
  </div>

  <div *ngIf="removingTierList">
    <h2>Tier List sauvegardées</h2>
    <p>Veuillez sélectionner une Tier List à supprimer</p>
    <button
      *ngFor="let tierList of loadedTierLists"
      (click)="selectTierListToRemove(tierList)"
    >
      {{ tierList.name }}
    </button>
  </div>
</details>

<br />

<details>
  <summary>Changer de Tier List</summary>

  <button
    *ngFor="let tierList of tierLists; let tierIndex = index"
    (click)="switchTierList(tierIndex)"
  >
    {{ tierList.name }}
  </button>
</details>

<div id="download" style="visibility: hidden; height: 0">
  <img #canvas />
  <a #downloadLink></a>
</div>

<div cdkDropListGroup>
  <div id="tablewrap">
    <table #screen>
      <tbody>
        <tr *ngFor="let tier of tiers; let i = index">
          <td class="labelHolder" contenteditable="false">
            <input
              [ngStyle]="{ 'background-color': colors[i] }"
              [(ngModel)]="tier.name"
            />
          </td>
          <td
            cdkDropList
            [cdkDropListData]="tier.characters"
            (cdkDropListDropped)="drop($event)"
          >
            <div class="tier sort" id="rows">
              <img
                *ngFor="let character of tier.characters"
                [src]="'assets/characters/' + character"
                width="64"
                alt=""
                cdkDrag
              />
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
